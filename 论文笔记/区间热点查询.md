使用2的倍数次幂划分区间,但是区间与区间之间存在50%的重叠,如对于区间长度为8的一个合法区间划分为[0,7],[4,11],[8,15]...
对于给定一个区间长度r的热点区域查询,我们找到**第一个大于2*r的2的整数次幂**,即如果r=7,那么2r=15,那么合适的查询区间长度为16,这么做是保证,最优解存在的区间不会因为人为的区间划分而截断,或者说对于**最优解一定会被整个包括在某个长度2r**的区间,而对于包含最优解的区间通常会成为topk
接下来对于该区间长度(2r)对应的sketch进行topk查询进行后续细化操作:
对于给定的一个待定区间,显然其长度大于需要的区间,因此需要进行合理的缩减,缩减时我们考虑将当前区间折半,**比较左边/右边相对权重**以此作为分割凭据(也有点贪心的意思,但是相对来说可能反例不是那么容易构造,而且只有当数据均匀分布时出问题的可能性比较大,对于随机数据或者存在明显次数差异的数据应该会好一点),找到**类似重心**的点(即昨天提及的truck)之后考虑拓展,或者这个过程中就可能可以解决,对于该算法的正确性我没证,大概是会存在一点误差的,但是误差差多少从主观的角度来说,反例没有昨天那么好找
PS:这个算法实际上是需要对topk的区间都类似的做一下操作,从中找到最大的作为最后答案
和昨天最大的差别就是昨天的是**自底向上**,先划分再找区间,这个做法是**自顶向下**,先找区间再找划分,可以作为对比实验看下具体使用过程中哪个比较优秀