# 事务处理(Transaction Processing)
## 数据库保护
定义:**排除**和**防止**各种对数据库的干扰破坏，确保数据安全可靠，以及在数据库遭到破坏后尽快地**恢复**

通过下面的方式来实现保护:
>+ 数据库的恢复技术(Deal with failure),本章重点
>+ 并发控制技术(Deal with data sharing),在18,19章介绍
>+ 完整性控制技术(Enable constraints)
>+ 安全性控制技术(Authorization and authentication)

本章内容:
>+ 数据库的一致性
>+ 事务的状态及原语操作
>+ 数据库系统故障分析
>+ Undo日志
>+ Redo日志
>+ Undo/Redo日志
>+ Checkpoint
>+ Log Rotation

## 一、数据库的一致性
一致状态(Consistent state:):满足所有完整性约束
一致数据库:满足一致状态的数据库

对于事务需要满足下面关系:
>+ 原子性(Atomicity):同一个事务的语句要么都执行,要么都不执行
>+ 一致性(Consistency):如果事务执行之前为一致状态,则执行后仍然为一致状态
>+ 隔离性(Isolation):事务之间不受影响
>+ 耐用性(Durability):将数据持久化

## 二、事务的状态以及原语操作
### 2.事务的状态:
>+ 开始 \<Start T\>表示事务T开始
>+ 提交 \<Commit T\>表示事务已经完成,并且写回磁盘持久化
>+ 丢弃 \<Abort T\>T事物中断,所有修改取消

### 3.事务的原语操作
>+ Input (x): disk block with x → memory 
>+ Output (x): buffer block with x → disk 
>+ Read (x,t): do input(x) if necessary t ← value of x in buffer 
>+ Write (x,t): do input(x) if necessary value of x in buffer ← t 

